{"version":3,"file":"popup.js","mappings":";;;;AAAAA,QAAQ,CAACC,gBAAgB,CAAC,kBAAkB,EAAE,YAAW;EACvD,IAAMC,WAAW,GAAGF,QAAQ,CAACG,cAAc,CAAC,cAAc,CAAC;EAC3D,IAAMC,YAAY,GAAGJ,QAAQ,CAACG,cAAc,CAAC,eAAe,CAAC;EAC7D,IAAME,eAAe,GAAGL,QAAQ,CAACG,cAAc,CAAC,kBAAkB,CAAC;EACnE,IAAMG,cAAc,GAAGN,QAAQ,CAACG,cAAc,CAAC,iBAAiB,CAAC;EACjE,IAAMI,YAAY,GAAGP,QAAQ,CAACG,cAAc,CAAC,eAAe,CAAC;EAC7D,IAAMK,WAAW,GAAGR,QAAQ,CAACG,cAAc,CAAC,cAAc,CAAC;EAC3D,IAAMM,aAAa,GAAGT,QAAQ,CAACG,cAAc,CAAC,gBAAgB,CAAC;EAC/D,IAAMO,cAAc,GAAGV,QAAQ,CAACG,cAAc,CAAC,iBAAiB,CAAC;EACjE,IAAMQ,WAAW,GAAGX,QAAQ,CAACG,cAAc,CAAC,cAAc,CAAC;;EAE3D;EACAE,eAAe,CAACJ,gBAAgB,CAAC,OAAO,EAAE,YAAW;IACnD,IAAMW,KAAK,GAAGC,UAAU,CAACR,eAAe,CAACO,KAAK,GAAG,GAAG,CAAC,CAACE,OAAO,CAAC,CAAC,CAAC;IAChER,cAAc,CAACS,WAAW,GAAGH,KAAK;EACpC,CAAC,CAAC;;EAEF;EACAR,YAAY,CAACH,gBAAgB,CAAC,OAAO,EAAE,YAAW;IAChDe,aAAa,CAAC,CAAC;EACjB,CAAC,CAAC;;EAEF;EACAd,WAAW,CAACD,gBAAgB,CAAC,UAAU,EAAE,UAASgB,CAAC,EAAE;IACnD,IAAIA,CAAC,CAACC,GAAG,KAAK,OAAO,EAAE;MACrBF,aAAa,CAAC,CAAC;IACjB;EACF,CAAC,CAAC;;EAEF;EACAN,cAAc,CAACT,gBAAgB,CAAC,OAAO,EAAE,YAAW;IAClD;IACAkB,gBAAgB,CAAC,+BAA+B,CAAC;EACnD,CAAC,CAAC;;EAEF;EACAR,WAAW,CAACV,gBAAgB,CAAC,OAAO,EAAE,UAASgB,CAAC,EAAE;IAChDA,CAAC,CAACG,cAAc,CAAC,CAAC;IAClB;IACAD,gBAAgB,CAAC,8BAA8B,CAAC;EAClD,CAAC,CAAC;;EAEF;EACA,SAASH,aAAaA,CAAA,EAAG;IACvB,IAAMK,KAAK,GAAGnB,WAAW,CAACU,KAAK,CAACU,IAAI,CAAC,CAAC;IAEtC,IAAI,CAACD,KAAK,EAAE;MACVF,gBAAgB,CAAC,6BAA6B,CAAC;MAC/C;IACF;IAEAA,gBAAgB,CAAC,cAAc,CAAC;;IAEhC;IACA,IAAMI,SAAS,GAAGV,UAAU,CAACR,eAAe,CAACO,KAAK,GAAG,GAAG,CAAC;;IAEzD;IACAY,MAAM,CAACC,IAAI,CAACJ,KAAK,CAAC;MAACK,MAAM,EAAE,IAAI;MAAEC,aAAa,EAAE;IAAI,CAAC,EAAE,UAASF,IAAI,EAAE;MACpED,MAAM,CAACC,IAAI,CAACG,WAAW,CACrBH,IAAI,CAAC,CAAC,CAAC,CAACI,EAAE,EACV;QACEC,MAAM,EAAE,eAAe;QACvBT,KAAK,EAAEA,KAAK;QACZE,SAAS,EAAEA;MACb,CAAC,EACD,UAASQ,QAAQ,EAAE;QACjB,IAAIP,MAAM,CAACQ,OAAO,CAACC,SAAS,EAAE;UAC5B;UACAd,gBAAgB,CAAC,mDAAmD,CAAC;UACrE;QACF;QAEAe,cAAc,CAACH,QAAQ,CAAC;MAC1B,CACF,CAAC;IACH,CAAC,CAAC;EACJ;;EAEA;EACA,SAASG,cAAcA,CAACH,QAAQ,EAAE;IAChC;IACAvB,WAAW,CAAC2B,SAAS,GAAG,EAAE;IAE1B,IAAI,CAACJ,QAAQ,IAAI,CAACA,QAAQ,CAACK,OAAO,IAAIL,QAAQ,CAACK,OAAO,CAACC,MAAM,KAAK,CAAC,EAAE;MACnE9B,YAAY,CAACQ,WAAW,GAAG,kBAAkB;MAC7CI,gBAAgB,CAAC,EAAE,CAAC;MACpB;IACF;IAEAZ,YAAY,CAACQ,WAAW,YAAAuB,MAAA,CAAYP,QAAQ,CAACK,OAAO,CAACC,MAAM,aAAU;;IAErE;IACAN,QAAQ,CAACK,OAAO,CAACG,OAAO,CAAC,UAASC,MAAM,EAAEC,KAAK,EAAE;MAC/C,IAAMC,UAAU,GAAG1C,QAAQ,CAAC2C,aAAa,CAAC,KAAK,CAAC;MAChDD,UAAU,CAACE,SAAS,GAAG,aAAa;;MAEpC;MACA,IAAMC,UAAU,GAAG7C,QAAQ,CAAC2C,aAAa,CAAC,KAAK,CAAC;MAChDE,UAAU,CAACD,SAAS,GAAG,aAAa;MACpCC,UAAU,CAAC9B,WAAW,GAAG+B,YAAY,CAACN,MAAM,CAACO,IAAI,EAAE,GAAG,CAAC;;MAEvD;MACA,IAAMC,WAAW,GAAGhD,QAAQ,CAAC2C,aAAa,CAAC,KAAK,CAAC;MACjDK,WAAW,CAACJ,SAAS,GAAG,cAAc;MACtCI,WAAW,CAACjC,WAAW,aAAAuB,MAAA,CAAa,CAACE,MAAM,CAACS,UAAU,GAAG,GAAG,EAAEnC,OAAO,CAAC,CAAC,CAAC,MAAG;;MAE3E;MACA4B,UAAU,CAACQ,WAAW,CAACL,UAAU,CAAC;MAClCH,UAAU,CAACQ,WAAW,CAACF,WAAW,CAAC;;MAEnC;MACAN,UAAU,CAACzC,gBAAgB,CAAC,OAAO,EAAE,YAAW;QAC9CuB,MAAM,CAACC,IAAI,CAACJ,KAAK,CAAC;UAACK,MAAM,EAAE,IAAI;UAAEC,aAAa,EAAE;QAAI,CAAC,EAAE,UAASF,IAAI,EAAE;UACpED,MAAM,CAACC,IAAI,CAACG,WAAW,CACrBH,IAAI,CAAC,CAAC,CAAC,CAACI,EAAE,EACV;YACEC,MAAM,EAAE,gBAAgB;YACxBW,KAAK,EAAED,MAAM,CAACC;UAChB,CACF,CAAC;QACH,CAAC,CAAC;MACJ,CAAC,CAAC;MAEFjC,WAAW,CAAC0C,WAAW,CAACR,UAAU,CAAC;IACrC,CAAC,CAAC;IAEFvB,gBAAgB,CAAC,EAAE,CAAC;EACtB;;EAEA;EACA,SAAS2B,YAAYA,CAACC,IAAI,EAAEI,SAAS,EAAE;IACrC,IAAIJ,IAAI,CAACV,MAAM,IAAIc,SAAS,EAAE,OAAOJ,IAAI;IACzC,OAAOA,IAAI,CAACK,SAAS,CAAC,CAAC,EAAED,SAAS,CAAC,GAAG,KAAK;EAC7C;;EAEA;EACA,SAAShC,gBAAgBA,CAACkC,OAAO,EAAE;IACjC5C,aAAa,CAACM,WAAW,GAAGsC,OAAO;EACrC;;EAEA;EACA,SAASC,eAAeA,CAAA,EAAG;IACzB9B,MAAM,CAAC+B,OAAO,CAACC,KAAK,CAACC,GAAG,CAAC,CAAC,YAAY,CAAC,EAAE,UAASC,IAAI,EAAE;MACtD,IAAMC,SAAS,GAAG3D,QAAQ,CAACG,cAAc,CAAC,YAAY,CAAC;MACvD,IAAIuD,IAAI,CAACE,UAAU,KAAK,SAAS,EAAE;QACjCD,SAAS,CAAC5C,WAAW,GAAG,cAAc;QACtC4C,SAAS,CAACf,SAAS,GAAG,SAAS;QAC/BjC,WAAW,CAACkD,KAAK,CAACC,OAAO,GAAG,MAAM;MACpC,CAAC,MAAM;QACLH,SAAS,CAAC5C,WAAW,GAAG,WAAW;QACnC4C,SAAS,CAACf,SAAS,GAAG,MAAM;MAC9B;IACF,CAAC,CAAC;EACJ;;EAEA;EACAU,eAAe,CAAC,CAAC;EACjBnC,gBAAgB,CAAC,iBAAiB,CAAC;AACrC,CAAC,CAAC,C","sources":["webpack://peek-semantic-search/./src/popup.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\r\n  const searchInput = document.getElementById('search-input');\r\n  const searchButton = document.getElementById('search-button');\r\n  const thresholdSlider = document.getElementById('threshold-slider');\r\n  const thresholdValue = document.getElementById('threshold-value');\r\n  const resultsCount = document.getElementById('results-count');\r\n  const resultsList = document.getElementById('results-list');\r\n  const statusMessage = document.getElementById('status-message');\r\n  const settingsButton = document.getElementById('settings-button');\r\n  const upgradeLink = document.getElementById('upgrade-link');\r\n\r\n  // Update threshold value display when slider changes\r\n  thresholdSlider.addEventListener('input', function() {\r\n    const value = parseFloat(thresholdSlider.value / 100).toFixed(1);\r\n    thresholdValue.textContent = value;\r\n  });\r\n\r\n  // Handle search button click\r\n  searchButton.addEventListener('click', function() {\r\n    performSearch();\r\n  });\r\n\r\n  // Handle enter key press in search input\r\n  searchInput.addEventListener('keypress', function(e) {\r\n    if (e.key === 'Enter') {\r\n      performSearch();\r\n    }\r\n  });\r\n\r\n  // Handle settings button click\r\n  settingsButton.addEventListener('click', function() {\r\n    // To be implemented - open settings page\r\n    setStatusMessage('Settings feature coming soon!');\r\n  });\r\n\r\n  // Handle upgrade link click\r\n  upgradeLink.addEventListener('click', function(e) {\r\n    e.preventDefault();\r\n    // To be implemented - open upgrade page\r\n    setStatusMessage('Upgrade feature coming soon!');\r\n  });\r\n\r\n  // Function to perform search\r\n  function performSearch() {\r\n    const query = searchInput.value.trim();\r\n    \r\n    if (!query) {\r\n      setStatusMessage('Please enter a search query');\r\n      return;\r\n    }\r\n\r\n    setStatusMessage('Searching...');\r\n    \r\n    // Get the current threshold value from the slider\r\n    const threshold = parseFloat(thresholdSlider.value / 100);\r\n    \r\n    // Send search request to content script\r\n    chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n      chrome.tabs.sendMessage(\r\n        tabs[0].id,\r\n        { \r\n          action: 'performSearch', \r\n          query: query,\r\n          threshold: threshold\r\n        },\r\n        function(response) {\r\n          if (chrome.runtime.lastError) {\r\n            // Handle errors (e.g., if content script isn't loaded)\r\n            setStatusMessage('Error: Could not connect to page. Try refreshing.');\r\n            return;\r\n          }\r\n          \r\n          displayResults(response);\r\n        }\r\n      );\r\n    });\r\n  }\r\n\r\n  // Function to display search results\r\n  function displayResults(response) {\r\n    // Clear previous results\r\n    resultsList.innerHTML = '';\r\n    \r\n    if (!response || !response.results || response.results.length === 0) {\r\n      resultsCount.textContent = 'No results found';\r\n      setStatusMessage('');\r\n      return;\r\n    }\r\n    \r\n    resultsCount.textContent = `Found ${response.results.length} results`;\r\n    \r\n    // Display each result\r\n    response.results.forEach(function(result, index) {\r\n      const resultItem = document.createElement('div');\r\n      resultItem.className = 'result-item';\r\n      \r\n      // Create result text element\r\n      const resultText = document.createElement('div');\r\n      resultText.className = 'result-text';\r\n      resultText.textContent = truncateText(result.text, 100);\r\n      \r\n      // Create result similarity score element\r\n      const resultScore = document.createElement('div');\r\n      resultScore.className = 'result-score';\r\n      resultScore.textContent = `Match: ${(result.similarity * 100).toFixed(1)}%`;\r\n      \r\n      // Add elements to result item\r\n      resultItem.appendChild(resultText);\r\n      resultItem.appendChild(resultScore);\r\n      \r\n      // Add click handler to scroll to this result on the page\r\n      resultItem.addEventListener('click', function() {\r\n        chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {\r\n          chrome.tabs.sendMessage(\r\n            tabs[0].id,\r\n            { \r\n              action: 'scrollToResult', \r\n              index: result.index\r\n            }\r\n          );\r\n        });\r\n      });\r\n      \r\n      resultsList.appendChild(resultItem);\r\n    });\r\n    \r\n    setStatusMessage('');\r\n  }\r\n\r\n  // Utility function to truncate text with ellipsis\r\n  function truncateText(text, maxLength) {\r\n    if (text.length <= maxLength) return text;\r\n    return text.substring(0, maxLength) + '...';\r\n  }\r\n\r\n  // Function to set status message\r\n  function setStatusMessage(message) {\r\n    statusMessage.textContent = message;\r\n  }\r\n\r\n  // Check tier status when popup opens\r\n  function checkTierStatus() {\r\n    chrome.storage.local.get(['tierStatus'], function(data) {\r\n      const tierBadge = document.getElementById('tier-badge');\r\n      if (data.tierStatus === 'premium') {\r\n        tierBadge.textContent = 'Premium Tier';\r\n        tierBadge.className = 'premium';\r\n        upgradeLink.style.display = 'none';\r\n      } else {\r\n        tierBadge.textContent = 'Free Tier';\r\n        tierBadge.className = 'free';\r\n      }\r\n    });\r\n  }\r\n\r\n  // Initialize\r\n  checkTierStatus();\r\n  setStatusMessage('Ready to search');\r\n});"],"names":["document","addEventListener","searchInput","getElementById","searchButton","thresholdSlider","thresholdValue","resultsCount","resultsList","statusMessage","settingsButton","upgradeLink","value","parseFloat","toFixed","textContent","performSearch","e","key","setStatusMessage","preventDefault","query","trim","threshold","chrome","tabs","active","currentWindow","sendMessage","id","action","response","runtime","lastError","displayResults","innerHTML","results","length","concat","forEach","result","index","resultItem","createElement","className","resultText","truncateText","text","resultScore","similarity","appendChild","maxLength","substring","message","checkTierStatus","storage","local","get","data","tierBadge","tierStatus","style","display"],"sourceRoot":""}